<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Matt Winkeler's Unit4 Coding Challenge</title>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
    <link type="text/css" href="https://code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css" rel="stylesheet" />

    <style>
      .cell
      {
      }
      .list
      {
        align-self: center;
        width: 50%;
      }
    </style>

    <script type="text/javascript">
      var data = {};

      $(document).ready(function()
      {
        $("#get").click(function()
        {
          $("#cell").show(); 
          //get the data         
          $.ajax(
          {
            url: 'https://randomuser.me/api/?results=10',
            dataType: 'json',
            success: function(data) 
            {
              //log the data to the console
              console.log(data);
              //display the items
              for (var i=0;i<data.results.length;++i)
              {
                var html = '<div onclick="showDetail('+i+')" class="cell" id="cell-'+i+'">';
                html += '<div class="picture">';
                html += '<img src="'+data.results[i].picture.thumbnail+'" />';
                html += '</div>';
                html += '<div class = info>';
                html += data.results[i].name.title+' '+data.results[i].name.first+' '+data.results[i].name.last;
                html += '<br />';
                html += data.results[i].location.city+', '+data.results[i].location.state;
                html += '</div>';
                html += '</div>';

                $('#list').append(html);
               //<a href="#myPopup-'+i+'" data-rel="popup"></a>
              }
            }
          });
        });
      });
      function showDetail(index)
      {
        alert('Made it to the function');
        //here I extract the index from the results I got from the AJAX call
        //I create some dynamic HTML here for the dialog
        var i = index;
        var name = data.results[i].name.title+' '+data.results[i].name.first+' '+data.results[i].name.last;
        var location = data.results[i].location.street+'<br />'+data.results[i].location.city+', '+data.results[i].location.state;
        var dob = data.results[i].dob;
        var gender = data.results[i].gender;
        var cell = data.results[i].cell;
        var email = data.results[i].email;

        alert('Variables complete');

        var html = '<div class="picture">';
        html += '<img src="'+data.results[i].picture.large+'" />';
        html += '</div>';
        html += '<div class = info>';
        html += '<b>Gender:</b> '+gender+'<br />';
        html += '<b>Cell:</b> '+cell+'<br />';
        html += '<b>DOB:</b> '+dob+'<br />';
        html += '<b>Email:</b> '+email+'<br /><br />';
        html += '<b>Location:</b><br />'+data.results[i].location.street+'<br />'+data.results[i].location.city+', '+data.results[i].location.state+'<br />';
        html += '</div>';

        alert('HTML complete');
  
        $('<div />').html(html).dialog({ title: name, modal: true, width: 500, height: 300 });
      }

        //$(".cell").click(function()
        //{
        //  alert("Person Information");
        //});
        
        //$(document).on('click', 'div.cell', function(){
          //alert('Yay!');
         // alert($(this).find('div.cell').html());
        //});

    </script>
  </head>
  <body>
    <!--<div id="pageone" data-role="main" class="ui-content">
      <p>Click on the image to enlarge it.</p>
      <p>Notice the dark overlay.</p>
      <a href="#myPopup" data-rel="popup" data-position-to="window">
        <img src="skaret.jpg" alt="Skaret View" style="width:200px;">
      </a>

      <div data-role="popup" id="myPopup" data-overlay-theme="b">
        <p>This is my picture!</p>
        <a href="#pageone" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a><img src="skaret.jpg" style="width:800px;height:400px;" alt="Skaret View">
      </div>
    </div> -->

    Gender data.results[i].gender
    Cell data.results[i].cell
    DOB data.results[i].dob
    Email data.results[i].email
    Full location
    data.results[i].location.street, data.results[i].location.city, data.results[i].location.state, data.results[i].postcode

    data.results[i].picture.large
     
    <br />TODO: get user data
    <br />TODO: display user data pretty
    <br />TODO: interact with user data in new popup
    <br />TODO: pretty stuff up a little bit
    <br />

    <div id='list'></div>
    <button id="clear">Clear</button>
    <button id="get">Get (New)</button>



  </body>
</html>
